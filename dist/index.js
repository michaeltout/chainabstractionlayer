(()=>{"use strict";var e={175:function(e,t,r){var s,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},n=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},u=this&&this.__spreadArray||function(e,t){for(var r=0,s=t.length,i=e.length;r<s;r++,i++)e[i]=t[r];return e},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validateAddress=t.getPubKeyHash=t.AddressTypes=t.witnessStackToScriptWitness=t.normalizeTransactionObject=t.decodeRawTransaction=t.selectCoins=t.getAddressNetwork=t.compressPubKey=t.calculateFee=void 0;var d=r(939),f=r(320),l=r(522),p=r(157),h=r(960),v=r(517),g=c(r(215)),b=a(r(543)),x=a(r(229)),y=a(r(736)),m=c(r(685)),w=c(r(701));t.AddressTypes=["legacy","p2sh-segwit","bech32"],t.calculateFee=function(e,t,r){return(148*e+34*t+10)*r},t.compressPubKey=function(e){var t=e.substring(2,66),r=e.substring(66,130);return(parseInt(r.substring(62,64),16)%2==0?"02":"03")+t},t.getAddressNetwork=function(e){var t;if(!(t=v.findKey(f.BitcoinNetworks,(function(t){return e.startsWith(t.bech32)})))){var r=d.base58.decode(e).toString("hex").substring(0,2);t=v.findKey(f.BitcoinNetworks,(function(e){return[d.padHexStart(e.pubKeyHash.toString(16),1),d.padHexStart(e.scriptHash.toString(16),1)].includes(r)}))}return f.BitcoinNetworks[t]},t.selectCoins=function(e,t,r,s){void 0===s&&(s=[]);var i=e,n=s.length?w.default:m.default;s.length&&(i=u(u([],s),e.filter((function(e){return!s.find((function(t){return t.vout===e.vout&&t.txid===e.txid}))}))));var o,a=n(i,t,Math.ceil(r)),c=a.inputs,d=a.outputs,f=a.fee;return c&&d&&(o=d.find((function(e){return"main"!==e.id}))),{inputs:c,outputs:d,fee:f,change:o}};var S=((s={})[x.types.P2WPKH]="witness_v0_keyhash",s[x.types.P2WSH]="witness_v0_scripthash",s);function _(e,t){var r=b.address.toOutputScript(e,t),s=x.output(r);if(![x.types.P2PKH,x.types.P2WPKH].includes(s))throw new Error("Bitcoin swap doesn't support the address "+e+" type of "+s+". Not possible to derive public key hash.");try{return b.address.fromBech32(e).data}catch(t){return b.address.fromBase58Check(e).hash}}t.decodeRawTransaction=function(e,t){var r=b.Transaction.fromHex(e),s=r.ins.map((function(e){return{txid:Buffer.from(e.hash).reverse().toString("hex"),vout:e.index,scriptSig:{asm:b.script.toASM(e.script),hex:e.script.toString("hex")},txinwitness:e.witness.map((function(e){return e.toString("hex")})),sequence:e.sequence}})),i=r.outs.map((function(e,r){var s=x.output(e.script),i={value:e.value/1e8,n:r,scriptPubKey:{asm:b.script.toASM(e.script),hex:e.script.toString("hex"),reqSigs:1,type:S[s]||s,addresses:[]}};try{var n=b.address.fromOutputScript(e.script,t);i.scriptPubKey.addresses.push(n)}catch(e){}return i}));return{txid:r.getHash(!1).reverse().toString("hex"),hash:r.getHash(!0).reverse().toString("hex"),version:r.version,locktime:r.locktime,size:r.byteLength(),vin:s,vout:i,hex:e}},t.normalizeTransactionObject=function(e,t,r){var s=e.vout.reduce((function(e,t){return e.plus(new g.default(t.value).times(1e8))}),new g.default(0)),n={hash:e.txid,value:s.toNumber(),_raw:i(i({},e),{size:e.hex.length/2,hash:e.txid}),confirmations:0,status:e.confirmations>0?l.TxStatus.Success:l.TxStatus.Pending};if(t){var o=Math.round(t/e.size);Object.assign(n,{fee:t,feePrice:o})}return r&&Object.assign(n,{blockHash:r.hash,blockNumber:r.number,confirmations:e.confirmations}),n},t.witnessStackToScriptWitness=function(e){var t,r=Buffer.allocUnsafe(0);function s(e){var t=r.length,s=y.encodingLength(e);r=Buffer.concat([r,Buffer.allocUnsafe(s)]),y.encode(e,r,t)}return s((t=e).length),t.forEach((function(e){s(e.length),function(e){r=Buffer.concat([r,Buffer.from(e)])}(e)})),r},t.getPubKeyHash=_,t.validateAddress=function(e,t){var r,s=p.addressToString(e);if("string"!=typeof s)throw new h.InvalidAddressError("Invalid address: "+s);try{r=_(s,t)}catch(e){throw new h.InvalidAddressError("Invalid Address. Failed to parse: "+s)}if(!r)throw new h.InvalidAddressError("Invalid Address: "+s)}},320:e=>{e.exports=require("@liquality/bitcoin-networks")},939:e=>{e.exports=require("@liquality/crypto")},960:e=>{e.exports=require("@liquality/errors")},522:e=>{e.exports=require("@liquality/types")},157:e=>{e.exports=require("@liquality/utils")},215:e=>{e.exports=require("bignumber.js")},736:e=>{e.exports=require("bip174/src/lib/converter/varint")},543:e=>{e.exports=require("bitcoinjs-lib")},229:e=>{e.exports=require("bitcoinjs-lib/src/classify")},685:e=>{e.exports=require("coinselect")},701:e=>{e.exports=require("coinselect/accumulative")},517:e=>{e.exports=require("lodash")}},t={},r=function r(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,r),n.exports}(175);module.exports=r})();
//# sourceMappingURL=index.js.map