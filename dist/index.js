(()=>{"use strict";var e={175:function(e,t,r){var i,s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},s.apply(this,arguments)},n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},a=this&&this.__spreadArray||function(e,t){for(var r=0,i=t.length,s=e.length;r<i;r++,s++)e[s]=t[r];return e},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validateAddress=t.getPubKeyHash=t.AddressTypes=t.witnessStackToScriptWitness=t.normalizeTransactionObject=t.decodeRawTransaction=t.selectCoins=t.getAddressNetwork=t.compressPubKey=t.calculateFee=void 0;var d=r(939),f=r(320),l=r(522),p=r(157),h=r(960),v=r(517),b=c(r(215)),g=u(r(543)),x=u(r(229)),y=u(r(736)),m=c(r(685)),w=c(r(701)),S=r(19);t.AddressTypes=["legacy","p2sh-segwit","bech32"],t.calculateFee=function(e,t,r){return(148*e+34*t+10)*r},t.compressPubKey=function(e){var t=e.substring(2,66),r=e.substring(66,130);return(parseInt(r.substring(62,64),16)%2==0?"02":"03")+t},t.getAddressNetwork=function(e){var t;if(!(t=v.findKey(f.BitcoinNetworks,(function(t){return e.startsWith(t.bech32)})))){var r=d.base58.decode(e).toString("hex").substring(0,2);t=v.findKey(f.BitcoinNetworks,(function(e){return[d.padHexStart(e.pubKeyHash.toString(16),1),d.padHexStart(e.scriptHash.toString(16),1)].includes(r)}))}return f.BitcoinNetworks[t]},t.selectCoins=function(e,t,r,i){void 0===i&&(i=[]);var s=e,n=i.length?w.default:m.default;i.length&&(s=a(a([],i),e.filter((function(e){return!i.find((function(t){return t.vout===e.vout&&t.txid===e.txid}))}))));var o,u=n(s,t,Math.ceil(r)),c=u.inputs,d=u.outputs,f=u.fee;return c&&d&&(o=d.find((function(e){return"main"!==e.id}))),{inputs:c,outputs:d,fee:f,change:o}};var _=((i={})[x.types.P2WPKH]="witness_v0_keyhash",i[x.types.P2WSH]="witness_v0_scripthash",i);function q(e,t){var r=g.address.toOutputScript(e,t),i=x.output(r);if(![x.types.P2PKH,x.types.P2WPKH].includes(i))throw new Error("Bitcoin swap doesn't support the address "+e+" type of "+i+". Not possible to derive public key hash.");try{return g.address.fromBech32(e).data}catch(t){return g.address.fromBase58Check(e).hash}}t.decodeRawTransaction=function(e,t){void 0===t&&(t=S.networks.verus);var r=S.Transaction.fromHex(e,t),i=r.ins.map((function(e){return{txid:Buffer.from(e.hash).reverse().toString("hex"),vout:e.index,scriptSig:{asm:S.script.toASM(e.script),hex:e.script.toString("hex")},txinwitness:e.witness.map((function(e){return e.toString("hex")})),sequence:e.sequence}})),s=r.outs.map((function(e,r){var i=x.output(e.script),s={value:e.value/1e8,n:r,scriptPubKey:{asm:S.script.toASM(e.script),hex:e.script.toString("hex"),reqSigs:1,type:_[i]||i,addresses:[]}};try{var n=S.address.fromOutputScript(e.script,t);s.scriptPubKey.addresses.push(n)}catch(e){}return s}));return{txid:r.getId(),hash:r.getId(),version:r.version,locktime:r.locktime,vin:i,vout:s,hex:e}},t.normalizeTransactionObject=function(e,t,r){var i=e.vout.reduce((function(e,t){return e.plus(new b.default(t.value).times(1e8))}),new b.default(0)),n={hash:e.txid,value:i.toNumber(),_raw:s(s({},e),{size:e.hex.length/2,hash:e.txid}),confirmations:0,status:e.confirmations>0?l.TxStatus.Success:l.TxStatus.Pending};if(t){var o=Math.round(t/e.hex.length);Object.assign(n,{fee:t,feePrice:o})}return r&&Object.assign(n,{blockHash:r.hash,blockNumber:r.number,confirmations:e.confirmations}),n},t.witnessStackToScriptWitness=function(e){var t,r=Buffer.allocUnsafe(0);function i(e){var t=r.length,i=y.encodingLength(e);r=Buffer.concat([r,Buffer.allocUnsafe(i)]),y.encode(e,r,t)}return i((t=e).length),t.forEach((function(e){i(e.length),function(e){r=Buffer.concat([r,Buffer.from(e)])}(e)})),r},t.getPubKeyHash=q,t.validateAddress=function(e,t){var r,i=p.addressToString(e);if("string"!=typeof i)throw new h.InvalidAddressError("Invalid address: "+i);try{r=q(i,t)}catch(e){throw new h.InvalidAddressError("Invalid Address. Failed to parse: "+i)}if(!r)throw new h.InvalidAddressError("Invalid Address: "+i)}},19:e=>{e.exports=require("@bitgo/utxo-lib")},320:e=>{e.exports=require("@liquality/bitcoin-networks")},939:e=>{e.exports=require("@liquality/crypto")},960:e=>{e.exports=require("@liquality/errors")},522:e=>{e.exports=require("@liquality/types")},157:e=>{e.exports=require("@liquality/utils")},215:e=>{e.exports=require("bignumber.js")},736:e=>{e.exports=require("bip174/src/lib/converter/varint")},543:e=>{e.exports=require("bitcoinjs-lib")},229:e=>{e.exports=require("bitcoinjs-lib/src/classify")},685:e=>{e.exports=require("coinselect")},701:e=>{e.exports=require("coinselect/accumulative")},517:e=>{e.exports=require("lodash")}},t={},r=function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,r),n.exports}(175);module.exports=r})();
//# sourceMappingURL=index.js.map